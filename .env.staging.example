# Sight - Staging Environment Variables
# ========================================
# Configuration for staging environment (Cloud Run + Cloud SQL)
# Copy this file to .env.staging and fill in your values
# DO NOT commit .env.staging to version control!
#
# Purpose: Test migrations and changes before production deployment
# Cloud Run Service: sight-staging
# Cloud SQL Instance: sight-staging-db

# Google Gemini API Key (use separate key for staging)
# Get your key from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=your_staging_gemini_api_key_here

# Database Configuration - Staging Cloud SQL
# Format: postgresql+asyncpg://USER:PASSWORD@/DATABASE?host=/cloudsql/PROJECT:REGION:INSTANCE
DATABASE_URL=postgresql+asyncpg://sight:STAGING_DB_PASSWORD@/sight_staging_db?host=/cloudsql/gen-lang-client-0508446677:europe-central2:sight-staging

# Alternative for local connection via Cloud SQL Proxy:
# DATABASE_URL=postgresql+asyncpg://sight:STAGING_DB_PASSWORD@localhost:5433/sight_staging_db

# Redis Configuration - Staging (separate Redis instance)
# Use Memorystore for Redis (GCP managed) or separate Redis container
REDIS_URL=redis://10.x.x.x:6379/0  # Replace with staging Redis IP
REDIS_MAX_CONNECTIONS=30  # Lower than production

# Neo4j Configuration - Staging (separate Neo4j instance)
# Use Neo4j Aura or separate container
NEO4J_URI=neo4j+s://xxxxxxxx.databases.neo4j.io  # Replace with staging Neo4j URI
NEO4J_USER=neo4j
NEO4J_PASSWORD=staging_neo4j_password_here

# Security - Staging Keys
# Generate with: openssl rand -hex 32
# Use DIFFERENT keys than production!
SECRET_KEY=staging_secret_key_min_32_chars_different_from_prod
ACCESS_TOKEN_EXPIRE_MINUTES=60  # Longer expiry for testing

# API Configuration
API_V1_PREFIX=/api/v1
PROJECT_NAME=Sight Staging
ENVIRONMENT=staging  # IMPORTANT: Must be 'staging'
DEBUG=True  # Enable debug mode for better error messages

# Logging
LOG_LEVEL=DEBUG  # More verbose logging for staging
STRUCTURED_LOGGING_ENABLED=true

# Feature Flags - Enable all features for testing
ORCHESTRATION_ENABLED=true
RAG_ENABLED=true
WORKFLOWS_ENABLED=true

# LLM Configuration - Use same models as production
DEFAULT_LLM_PROVIDER=google
DEFAULT_MODEL=gemini-2.5-flash
GRAPH_MODEL=gemini-2.5-flash
PERSONA_GENERATION_MODEL=gemini-2.5-flash
ANALYSIS_MODEL=gemini-2.5-pro
EMBEDDING_MODEL=models/gemini-embedding-001
TEMPERATURE=0.7
MAX_TOKENS=6000

# RAG Configuration
RAG_USE_HYBRID_SEARCH=true
RAG_USE_RERANKING=false
RAG_RERANK_CANDIDATES=5
RETRIEVAL_MODE=hybrid
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=300
RAG_TOP_K=8
RAG_VECTOR_WEIGHT=0.7
RAG_RRF_K=60

# Orchestration
ORCHESTRATION_TIMEOUT=90

# Google Cloud Platform
GCP_PROJECT_ID=gen-lang-client-0508446677
GCP_REGION=europe-central2
SERVICE_URL=https://sight-staging-xfabt2svwa-lm.a.run.app  # Replace with actual staging URL

# Resource Limits (lower than production)
MEMORY=2Gi  # Production: 4Gi
CPU=1       # Production: 2
MAX_INSTANCES=2  # Production: 5

# Optional: Test with different LLM providers
# OPENAI_API_KEY=sk-test-...
# ANTHROPIC_API_KEY=sk-ant-test-...
